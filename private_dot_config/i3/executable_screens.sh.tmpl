#!/bin/bash

{{- if eq .email "albert.callarisa@form3.tech" }}
internal=eDP-1-1
external=DP-1-3
laptop_res_w=1920
laptop_res_h=1080
{{- end }}
{{- if eq .email "albert@acroca.com" }}
internal=eDP-1
external=HDMI-2
laptop_res_w=1440
laptop_res_h=900
{{- end }}


if xrandr | grep "$external disconnected"; then
  {{- if (index . "dpi") }}
  xrandr --output "$external" --off --output "$internal" --auto
  {{- else }}
  xrandr --output "$external" --off --output "$internal" --auto --mode "$laptop_res_w"x"$laptop_res_h"
  {{- end }}
elif cat /proc/acpi/button/lid/LID0/state | grep "closed"; then
  xrandr --output "$internal" --off --output "$external" --auto
else
  xrandr \
    --output $external --primary --mode 2560x1440 --pos "$laptop_res_w"x0 \
    --output $internal --mode "$laptop_res_w"x"$laptop_res_h" --pos 0x0
fi
